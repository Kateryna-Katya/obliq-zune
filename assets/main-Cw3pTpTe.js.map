{"version":3,"file":"main-Cw3pTpTe.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ПОЛНЫЙ СКРИПТ САЙТА (Версия с исправленным телефоном)\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  // --- 1. РЕГИСТРАЦИЯ ПЛАГИНОВ ---\n  gsap.registerPlugin(ScrollTrigger);\n\n  // --- 2. ИНИЦИАЛИЗАЦИЯ LENIS (ПЛАВНЫЙ СКРОЛЛ) ---\n  const lenis = new Lenis({\n    duration: 1.2,\n    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n    smoothWheel: true,\n  });\n\n  lenis.on('scroll', ScrollTrigger.update);\n  gsap.ticker.add((time) => {\n    lenis.raf(time * 1000);\n  });\n  gsap.ticker.lagSmoothing(0);\n\n  if (window.lucide) lucide.createIcons();\n\n  // --- 3. МОБИЛЬНОЕ МЕНЮ ---\n  const burger = document.querySelector('.burger');\n  const nav = document.querySelector('.nav');\n  const navLinks = document.querySelectorAll('.nav__link');\n\n  if (burger && nav) {\n    const toggleMenu = () => {\n      const isOpen = nav.classList.toggle('open');\n      burger.classList.toggle('active');\n      document.body.style.overflow = isOpen ? 'hidden' : '';\n    };\n    burger.addEventListener('click', toggleMenu);\n    navLinks.forEach(link => link.addEventListener('click', () => {\n      if (nav.classList.contains('open')) toggleMenu();\n    }));\n  }\n\n  const header = document.querySelector('.header');\n  if (header) {\n    ScrollTrigger.create({\n      start: \"top -50\",\n      onUpdate: (self) => {\n        header.classList.toggle('scrolled', self.scroll() > 50);\n      }\n    });\n  }\n\n  // --- 4. АНИМАЦИИ GSAP ---\n  const heroTitle = document.querySelector('.hero__title');\n  if (heroTitle) {\n    const splitHero = new SplitType(heroTitle, { types: 'chars' });\n    gsap.from(splitHero.chars, {\n      opacity: 0,\n      y: 50,\n      rotateX: -90,\n      stagger: 0.03,\n      duration: 1.2,\n      ease: \"power4.out\"\n    });\n    gsap.from('.fade-in', {\n      opacity: 0, y: 30, stagger: 0.2, duration: 1, delay: 0.5, ease: \"power3.out\"\n    });\n  }\n\n  gsap.utils.toArray('.fade-up').forEach(elem => {\n    gsap.from(elem, {\n      scrollTrigger: {\n        trigger: elem,\n        start: \"top 90%\",\n        toggleActions: \"play none none reverse\"\n      },\n      opacity: 0, y: 40, duration: 0.8, ease: \"power2.out\"\n    });\n  });\n\n  // --- 5. ГОРИЗОНТАЛЬНЫЙ СКРОЛЛ (МЕНТОРСТВО) ---\n  const initHorizontal = () => {\n    const toolsSection = document.querySelector('.tools-horizontal-container');\n    const toolsTrack = document.querySelector('.tools-track');\n\n    if (toolsSection && toolsTrack) {\n      const mm = gsap.matchMedia();\n      mm.add(\"(min-width: 769px)\", () => {\n        const getScrollAmount = () => toolsTrack.scrollWidth - window.innerWidth;\n        const tween = gsap.to(toolsTrack, {\n          x: () => -getScrollAmount(),\n          ease: \"none\",\n          scrollTrigger: {\n            trigger: toolsSection,\n            start: \"top top\",\n            end: () => `+=${toolsTrack.scrollWidth}`,\n            pin: true,\n            scrub: 1,\n            invalidateOnRefresh: true,\n          }\n        });\n        return () => {\n          if (tween.scrollTrigger) tween.scrollTrigger.kill();\n          gsap.set(toolsTrack, { clearProps: \"all\" });\n        };\n      });\n    }\n  };\n\n  // --- 6. SWIPER (БЛОГ) ---\n  if (document.querySelector('.blog-slider')) {\n    new Swiper('.blog-slider', {\n      slidesPerView: 1,\n      spaceBetween: 20,\n      loop: true,\n      pagination: { el: '.swiper-pagination', clickable: true },\n      breakpoints: {\n        768: { slidesPerView: 2, spaceBetween: 30 },\n        1024: { slidesPerView: 3, spaceBetween: 30 }\n      }\n    });\n  }\n\n  // --- 7. ВАЛИДАЦИЯ ФОРМЫ (ИСПРАВЛЕНО) ---\n  const form = document.getElementById('contact-form');\n  if (form) {\n    const captchaLabel = document.getElementById('captcha-label');\n    const successPopup = document.getElementById('success-popup');\n    const phoneInput = form.querySelector('input[type=\"tel\"]');\n\n    let n1 = Math.floor(Math.random() * 10), n2 = Math.floor(Math.random() * 10);\n    let captchaResult = n1 + n2;\n    if (captchaLabel) captchaLabel.textContent = `Сколько будет ${n1} + ${n2}? *`;\n\n    // ЗАПРЕТ ВВОДА БУКВ В ТЕЛЕФОН (в реальном времени)\n    if (phoneInput) {\n      phoneInput.addEventListener('input', (e) => {\n        // Удаляем всё, кроме цифр, плюса, скобок и дефиса\n        e.target.value = e.target.value.replace(/[^\\d+()\\- ]/g, '');\n      });\n    }\n\n    const validate = (input) => {\n      const group = input.closest('.form__group');\n      const error = group.querySelector('.form__error');\n      let isValid = true;\n      let msg = \"\";\n\n      const val = input.value.trim();\n\n      if (input.hasAttribute('required') && !val && input.type !== 'checkbox') {\n        isValid = false;\n        msg = \"Это поле обязательно\";\n      }\n      else if (input.type === 'email' && val && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(val)) {\n        isValid = false;\n        msg = \"Неверный формат email\";\n      }\n      else if (input.type === 'tel' && val && !/^[0-9+\\s()\\-]{7,20}$/.test(val)) {\n        isValid = false;\n        msg = \"Введите корректный номер\";\n      }\n      else if (input.id === 'captcha' && parseInt(val) !== captchaResult) {\n        isValid = false;\n        msg = \"Неверный ответ\";\n      }\n      else if (input.type === 'checkbox' && !input.checked) {\n        isValid = false;\n        msg = \"Нужно ваше согласие\";\n      }\n\n      input.classList.toggle('error', !isValid);\n      if (error) {\n        error.innerText = msg;\n        error.style.display = isValid ? 'none' : 'block';\n      }\n      return isValid;\n    };\n\n    form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      const inputs = Array.from(form.querySelectorAll('input, textarea'));\n      const formValid = inputs.every(validate);\n\n      if (formValid) {\n        const btn = form.querySelector('.btn--submit');\n        const originalText = btn.innerText;\n        btn.disabled = true;\n        btn.innerText = \"Отправка...\";\n\n        setTimeout(() => {\n          form.reset();\n          btn.disabled = false;\n          btn.innerText = originalText;\n          successPopup?.classList.add('show');\n          // Обновляем капчу для следующего раза\n          n1 = Math.floor(Math.random() * 10); n2 = Math.floor(Math.random() * 10);\n          captchaResult = n1 + n2;\n          if (captchaLabel) captchaLabel.textContent = `Сколько будет ${n1} + ${n2}? *`;\n        }, 2000);\n      }\n    });\n\n    document.getElementById('close-popup')?.addEventListener('click', () => {\n      successPopup?.classList.remove('show');\n    });\n  }\n\n  // --- 8. КУКИ ---\n  const cookiePopup = document.getElementById('cookie-popup');\n  if (cookiePopup && !localStorage.getItem('cookiesAccepted')) {\n    setTimeout(() => cookiePopup.classList.add('show'), 2000);\n    document.getElementById('accept-cookies')?.addEventListener('click', () => {\n      localStorage.setItem('cookiesAccepted', 'true');\n      cookiePopup.classList.remove('show');\n    });\n  }\n\n  // --- 9. ЗАПУСК ---\n  window.addEventListener(\"load\", () => {\n    initHorizontal();\n    ScrollTrigger.refresh();\n  });\n});"],"names":["lenis","t","time","burger","nav","navLinks","toggleMenu","isOpen","link","header","self","heroTitle","splitHero","elem","initHorizontal","toolsSection","toolsTrack","getScrollAmount","tween","form","captchaLabel","successPopup","phoneInput","n1","n2","captchaResult","e","validate","input","error","isValid","msg","val","btn","originalText","_a","cookiePopup","_b"],"mappings":"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"}